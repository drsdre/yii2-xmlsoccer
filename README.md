# Yii2-xmlsoccer

Yii2 client for [XMLSoccer](http://XMLSoccer.com) API

Full API Documentation here: [http://xmlsoccer.wikia.com/wiki/API_Documentation](http://xmlsoccer.wikia.com/wiki/API_Documentation)

# Requirements:

PHP5 with CURL, SimpleXML extensions.

## Installation

The preferred way to install this extension is through [composer](http://getcomposer.org/download/).

Either run

```sh
$ composer require --prefer-dist drsdre/yii2-xmlsoccer "*"
```

or add

```json
"drsdre/yii2-xmlsoccer": "*" 
```

to the `require` section of your `composer.json` file.

## Usage

You need to setup the client as application component:

```php
'components' => [
    'xmlsoccerApi' => [
        'class' => '\drsdre\yii\xmlsoccer\Client',
        'apiKey' => 'xxx',
        'serviceUrl' => 'http://www.xmlsoccer.com/FootballData.asmx',
    ]
    ...
]
```

or define the client directly in the code:

```php
$client = new \drsdre\yii\xmlsoccer\Client([
    'apiKey' => 'xxx',
    'serviceUrl' => 'http://www.xmlsoccer.com/FootballData.asmx',
]);
```

By default client url is setup to demo API (http://www.xmlsoccer.com/FootballData.asmx). For demo access use http://www.xmlsoccer.com/FootballDataDemo.asmx as url.

## Configuration

Optionally a cache component can be added to keep the client returning data during call time-out:

```php
'components' => [
    'xmlsoccerApi' => [
        'class' => '\drsdre\yii\xmlsoccer\Client',
        'apiKey' => 'xxx',
        'cache' => [
            'class' => '\yii\caching\FileCache'
        ],
    ]
    ...
]
```

To facilitate quicker processing of the data, a content hash can be generated by setting the parameter 'generate_hash' to true. The XML ouput will then include two new attributes:

*  contentHash: MD5 hash
*  sourceURL: URL used to retrieve the data

If you need to have the API be executed via a specific network adapter it's possible the specify the outgoing IP:

```php
$client = new \drsdre\yii\xmlsoccer\Client([
    'apiKey' => 'xxx',
    'serviceUrl' => 'http://www.xmlsoccer.com/FootballData.asmx',
    'serviceIp' => '192.168.1.1',
]);
```

# How to use API:

Go to [Getting started](http://xmlsoccer.wikia.com/wiki/Getting_started) and receive API key for access to XMLSoccer.com API.

Include the module, and call one of available methods.
	

## Methods Available

Go to [http://www.xmlsoccer.com/FootballData.asmx](http://www.xmlsoccer.com/FootballData.asmx) for more info about methods and parameters including online testing. See 
[input data formats](http://xmlsoccer.wikia.com/wiki/Input_data_formats) to find out how the input parameters need to be formatted.

# Examples:

## List players for team with id 49
```php
try {
    $client = new \drsdre\yii\xmlsoccer\Client([
        'apiKey' => 'xxx',
    ]);
    $players = $client->getPlayersByTeam('49');
    echo "Players List:<br>";
    foreach($players as $key => $value) {
        echo "<b>".$value->Name."</b> ".$value->Position."<br>";
    }
}
catch(Exception $e) {
    echo "XMLSoccer Exception: ".$e->getMessage();
}
```

## If your server has multiple IP's available, you can set any IP for request:
```php
try {
    $client = new \drsdre\yii\xmlsoccer\Client([
        'apiKey' => 'xxx',
    ]);
    $client->setRequestIp("ip_for_request");
    $leagues = $client->getLeagueStandingsBySeason('3', '1516'));
    var_dump($leagues);
}
catch(Exception $e) {
    echo "XMLSoccer Exception: ".$e->getMessage();
}
```

## If you have a trial/free demo feed, use it like this:
```php
try{
    $client = new \drsdre\yii\xmlsoccer\Client([
        'apiKey' => 'xxx',
        'serviceUrl' => 'http://www.xmlsoccer.com/FootballDataDemo.asmx',
    ]);
    $fixtures = $client->getFixturesByDateIntervalAndLeague('2016-01-01 00:00', '2016-02-01 00:00', '3'));
    var_dump($fixtures);
}
catch(Exception $e){
    echo "XMLSoccer Exception: ".$e->getMessage();
}
```

**That's all!**
